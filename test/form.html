<!-- F2F Hero Calculator - ULTRA RANDOM CLASSES - No conflicts -->
<div class="xyz789calc-wrapper">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <div class="abc123card-main" role="form" aria-label="Transfer calculator">
    <!-- Form Content -->
    <div class="def456form-content">
      <!-- You send -->
      <label class="ghi789label-text">You send exactly</label>
      <div class="jkl012input-box jkl012input-box-first">
        <input id="mno345send-input" type="text" value="1,000.00" class="pqr678amount-field">
        <div class="stu901currency-badge">
          <select id="vwx234from-select" class="yza567currency-dropdown" aria-label="Sender currency">
            <option value="AMD">üá¶üá≤ AMD</option>
            <option value="GEL">üá¨üá™ GEL</option>
            <option value="AED">üá¶üá™ AED</option>
            <option value="GBP">üá¨üáß GBP</option>
            <option value="SAR">üá∏üá¶ SAR</option>
            <option value="CAD">üá®üá¶ CAD</option>
            <option value="EUR">üá™üá∫ EUR</option>
            <option value="MYR">üá≤üáæ MYR</option>
            <option value="USD">üá∫üá∏ USD</option>
          </select>
        </div>
      </div>
      <!-- Recipient gets -->
      <label class="ghi789label-text">Recipient gets</label>
      <div class="jkl012input-box">
        <input id="bcd890recv-input" type="text" class="pqr678amount-field" value="855.17">
        <div class="stu901currency-badge">
          <select id="efg123to-select" class="yza567currency-dropdown" aria-label="Recipient currency">
            <option value="INR">üáÆüá≥ INR</option>
            <option value="PKR">üáµüá∞ PKRsss</option>
          </select>
        </div>
      </div>

      asfasfasfasfasfasfasf bligg
      title
      <!-- Payment method -->
      <label class="ghi789label-text">Paying with</label>
      <div class="hij456payment-box">
        <select id="klm789bank-select" class="nop012bank-dropdown-hidden" aria-label="Bank options" style="display: none;">
          <option value="ach">Connected bank account (ACH)</option>
          <option value="wire">Wire tranfffffffsfer</option>
          <option value="card">Credit/Debit card</option>
        </select>
        <div class="qrs345bank-name-btn" id="klm789bank-btn">
          <span class="tuv678change-text">Connected bank account (ACH)</span>
        </div>
        <div class="qrs345change-btn" id="klm789bank-change-btn">
          <span class="tuv678change-text">CHANGE</span>
          <span class="wxy901chevron-icon">‚Ä∫</span>
        </div>
      </div>
      <!-- Receive at -->
      <label class="ghi789label-text">Receive at</label>
      <div class="hij456payment-box">
        <select id="zab234receive-select" class="nop012bank-dropdown-hidden" aria-label="Receive options" style="display: none;">
          <option value="ach">Connected bank account (ACH)</option>
          <option value="wire">Wire transfer</option>
          <option value="card">Credit/Debit card</option>
        </select>
        <div class="qrs345bank-name-btn" id="zab234receive-btn">
          <span class="tuv678change-text">Connected bank account (ACH)</span>
        </div>
        <div class="qrs345change-btn" id="zab234receive-change-btn">
          <span class="tuv678change-text">CHANGE</span>
          <span class="wxy901chevron-icon">‚Ä∫</span>
        </div>
      </div>
      <!-- Delivery info -->
      <div class="cde567delivery-info">
        <span class="fgh890delivery-text">Arrives in few Minutes</span>
        <span class="ijk123lightning-icon">‚ö°</span>
      </div>
      <!-- Action buttons -->
      <div class="lmn456button-group">
        <button class="opq789send-button whatsapp-style" id="rst012send-btn1">
          <img src="https://evl.ltb.mybluehost.me/website_342de87a/wp-content/uploads/2025/10/Group.png" alt="WhatsApp" class="uvw345whatsapp-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
          <span style="display:none;">üì±</span>
          Send money
        </button>
        <button class="opq789send-button telegram-style" id="xyz678send-btn2">
          <img src="https://evl.ltb.mybluehost.me/website_342de87a/wp-content/uploads/2025/10/Group-1.png" alt="Telegram" class="abc901telegram-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
          <span style="display:none;">‚úàÔ∏è</span>
          Send money
        </button>
      </div>
    </div>
    <!-- Right side image -->
    <div class="img789right-side">
      <img src="https://fiat2fiat.com/wp-content/uploads/2025/12/Frame-547-1.webp"
     alt="Hero image"
     class="xyz123globe-image">

    </div>
  </div>
</div>

<style>
/* ULTRA RANDOM CLASSES - No conflicts with any website */
.xyz789calc-wrapper {
  --calc-green: #0C5D3B;
  --calc-light-gray: #F5F5F5;
  --calc-border: #E0E0E0;
  --calc-text: #1A1A1A;
  --calc-text-light: #666666;
  
  /* Complete isolation */
  position: relative;
  z-index: 1;
  isolation: isolate;
  contain: layout style;
  width: 900px;
  max-width: 100%;
  margin: 0 auto;
  padding: 0;
  background: transparent;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  box-sizing: border-box;
}

/* Reset everything inside */
.xyz789calc-wrapper * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;

}

/* Flag emoji display */
.xyz789calc-wrapper .yza567currency-dropdown option {
  font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji', 'EmojiOne', sans-serif !important;
  font-size: 14px !important;
  line-height: 1.2;
}

.xyz789calc-wrapper select.yza567currency-dropdown {
  font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji', 'EmojiOne', sans-serif !important;
}

/* Main card */
.abc123card-main {
  width: 900px;
  max-width: 100%;
  background: #ffffff;
  border-radius: 24px;
  padding: 24px;
  position: relative;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
  border: none;
  display: flex;
  flex-direction: row;
  gap: 0;
  margin: 0 auto;
}

/* Form content */
.def456form-content {
  width: 50%;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-right: 12px;
}

/* Right side image container */
.img789right-side {
  width: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  border-radius: 8px;
}

/* Globe image */
.xyz123globe-image {
  max-width: 100%;
  height: auto;
  object-fit: contain;
}

/* Smaller image on iPad */
@media (max-width: 1024px) and (min-width: 769px) {
  .xyz123globe-image {
    max-width: 70%;
  }
}

/* Labels */
.ghi789label-text {
  display: block;
  font-weight: 600;
  font-size: 12px;
  margin: 0 0 4px 0;
  color: var(--calc-text);
}

/* Input containers */
.jkl012input-box {
  position: relative;
  display: flex;
  align-items: center;
  background: #ffffff;
  border: 1px solid var(--calc-border);
  border-radius: 8px;
  padding: 4px;
  height: 40px;
}

/* Remove border from first input box */

/* Amount inputs */
.pqr678amount-field {
  flex: 1;
  border: none !important;
  outline: none !important;
  background: transparent !important;
  padding: 8px 12px;
  font-size: 18px;
  font-weight: 700;
  color: var(--calc-text);
}

.pqr678amount-field:focus {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

.pqr678amount-field[readonly] {
  background: transparent !important;
  color: var(--calc-text);
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Currency badge */
.stu901currency-badge {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 2;
}

/* Currency select */
.yza567currency-dropdown {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background: var(--calc-light-gray);
  border: none;
  border-radius: 14px;
  padding: 3px 20px 3px 6px;
  font-weight: 600;
  font-size: 11px;
  color: var(--calc-text);
  cursor: pointer;
  outline: none;
  transition: all 0.2s ease;
  min-width: 55px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  font-family: 'Segoe UI Emoji', 'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji', 'EmojiOne', sans-serif;
}

.yza567currency-dropdown:hover {
  background: var(--calc-green);
  color: white;
  box-shadow: 0 4px 12px rgba(12, 93, 59, 0.3);
}

/* Payment containers */
.hij456payment-box {
  position: relative;
  display: flex;
  align-items: center;
  background: #ffffff;
  border: 1px solid var(--calc-border);
  border-radius: 8px;
  padding: 4px;
  height: 40px;
}

/* Bank name display button */
.qrs345bank-name-btn {
  flex: 1;
  display: flex;
  align-items: center;
  padding: 8px 12px;
  font-weight: 600;
  font-size: 12px;
  color: var(--calc-text);
  pointer-events: none;
  cursor: default;
}

.qrs345bank-name-btn .tuv678change-text {
  font-size: 12px;
  font-weight: 600;
  text-align: left;
}

/* Change button for banks */
.qrs345change-btn {
  position: absolute;
  right: 4px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  gap: 2px;
  background: var(--calc-light-gray);
  border: none;
  border-radius: 14px;
  padding: 3px 6px;
  font-weight: 600;
  font-size: 10px;
  color: var(--calc-text);
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 2;
}

.qrs345change-btn:hover {
  background: var(--calc-green);
  color: white;
  box-shadow: 0 4px 12px rgba(12, 93, 59, 0.3);
}

.wxy901chevron-icon {
  font-size: 12px;
  font-weight: 300;
}

/* Delivery info */
.cde567delivery-info {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
  color: var(--calc-text-light);
  font-size: 12px;
  font-weight: 500;
}

.fgh890delivery-text {
  color: var(--calc-text-light);
}

.ijk123lightning-icon {
  font-size: 16px;
  color: #000000;
  filter: grayscale(100%) brightness(0);
}

/* Buttons container */
.lmn456button-group {
  display: flex;
  gap: 12px;
  align-items: center;
}

/* Send buttons */
.opq789send-button {
  flex: 1;
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  background: var(--calc-green);
  color: #ffffff;
  font-weight: 700;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.opq789send-button:hover {
  background: #0a4d30;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(12, 93, 59, 0.3);
}

/* Button icons */
.uvw345whatsapp-icon {
  width: 20px;
  height: 20px;
  margin-right: 8px;
  vertical-align: middle;
  display: inline-block;
  object-fit: contain;
}

.abc901telegram-icon {
  width: 20px;
  height: 20px;
  margin-right: 8px;
  vertical-align: middle;
  display: inline-block;
  object-fit: contain;
}

/* WhatsApp button */
.whatsapp-style {
  background: #0C5D3B !important;
}

.whatsapp-style:hover {
  background: #0a4d30 !important;
}

/* Telegram button */
.telegram-style {
  background: #0C5D3B !important;
}

.telegram-style:hover {
  background: #0a4d30 !important;
}

/* Responsive design */
@media (max-width: 1024px) {
  .abc123card-main {
    width: 100%;
    max-width: calc(100% - 40px);
    padding: 20px;
    flex-direction: column;
  }
  
  .def456form-content {
    width: 100%;
    padding-right: 0;
    gap: 6px;
  }
  
  .img789right-side {
    width: 100%;
    padding-left: 0;
    padding-top: 20px;
  }
  
  .pqr678amount-field {
    font-size: 16px;
    padding-right: 70px;
  }
  
  .lmn456button-group {
    flex-direction: column;
    gap: 8px;
  }
  
  .opq789send-button {
    width: 100%;
  }
}

@media (max-width: 768px) {
  .abc123card-main {
    width: 100%;
    max-width: calc(100% - 20px);
    padding: 16px;
    flex-direction: column;
  }
  
  .img789right-side {
    padding-top: 16px;
  }
  
  .xyz123globe-image {
    max-width: 50%;
  }
  
  .pqr678amount-field {
    font-size: 14px;
    padding-right: 60px;
  }
  
  .stu901currency-badge {
    right: 6px;
  }
  
  .yza567currency-dropdown {
    min-width: 60px;
    font-size: 10px;
    padding: 4px 20px 4px 6px;
  }
  
  .qrs345change-btn {
    right: 4px;
    padding: 4px 6px;
  }
  
  .tuv678change-text {
    font-size: 8px;
  }
}

@media (max-width: 480px) {
  .abc123card-main {
    width: 100%;
    max-width: calc(100% - 16px);
    padding: 12px;
    margin: 8px auto;
    flex-direction: column;
  }
  
  .img789right-side {
    padding-top: 12px;
  }
  
  .xyz123globe-image {
    max-width: 40%;
  }
  
  .def456form-content {
    gap: 4px;
  }
  
  .pqr678amount-field {
    font-size: 12px;
    padding-right: 50px;
  }
  
  .yza567currency-dropdown {
    min-width: 50px;
    font-size: 9px;
    padding: 3px 16px 3px 4px;
  }
  
  .qrs345change-btn {
    right: 3px;
    padding: 3px 4px;
  }
  
  .tuv678change-text {
    font-size: 7px;
  }
  
  .lmn456button-group {
    gap: 6px;
  }
  
  .opq789send-button {
    padding: 6px 12px;
    font-size: 12px;
  }
}
</style>

<script>
(function() {
  'use strict';
  
  // ============================================
  // LIVE EXCHANGE RATES CONFIGURATION (100% FREE!)
  // ============================================
  // Uses exchangerate-api.com - completely FREE, no API key needed!
  // Features:
  // - localStorage caching: Rates cached for 24 hours, shared across all visitors
  // - Only fetches once per day max (even if 1000 people visit, only 1 fetch!)
  // - No API limits, no signup required
  // - Automatic fallback to cached/fallback rates if API fails
  // ============================================
  const F2F_API_BASE = 'https://api.exchangerate-api.com/v4/latest'; // Free API, no key needed!
  const F2F_CACHE_DURATION = 24 * 60 * 60 * 1000; // Cache rates for 24 hours
  const F2F_CACHE_KEY = 'f2f_exchange_rates_cache';
  const F2F_CACHE_TIMESTAMP_KEY = 'f2f_exchange_rates_timestamp';
  
  // Fallback rates (used if API fails or during initial load)
  const F2F_FALLBACK_RATES = {
    GEL: {INR:32.55,PKR:104.38,USD:0.37,EUR:0.34,GBP:0.29,CAD:0.50,AED:1.36,SAR:1.39,AMD:150.25,MYR:1.75,AUD:0.55},
    AMD: {INR:0.23,PKR:0.74,USD:0.65,EUR:0.60,GBP:0.51,CAD:0.88,AED:2.39,SAR:2.44,GEL:0.67,MYR:3.07,AUD:0.97},
    AED: {INR:23.90,PKR:76.51,USD:0.27,EUR:0.25,GBP:0.21,CAD:0.37,GEL:0.74,SAR:1.02,AMD:0.42,MYR:1.28,AUD:0.41},
    MYR: {INR:20.78,PKR:66.45,USD:0.24,EUR:0.22,GBP:0.19,CAD:0.32,GEL:0.57,AED:0.78,SAR:0.80,AMD:0.33,AUD:0.35},
    GBP: {INR:116.96,PKR:374.27,USD:1.35,EUR:1.24,CAD:1.80,GEL:3.45,AED:4.75,SAR:4.85,AMD:1.96,MYR:5.26,AUD:2.13},
    CAD: {INR:63.52,PKR:200.78,USD:0.72,EUR:0.67,GBP:0.56,GEL:2.00,AED:2.70,SAR:2.76,AMD:1.14,MYR:3.13,AUD:1.16},
    EUR: {INR:101.98,PKR:328.99,USD:1.19,GBP:0.81,CAD:1.49,GEL:2.94,AED:4.00,SAR:4.09,AMD:1.67,MYR:4.55,AUD:1.80},
    SAR: {INR:23.42,PKR:74.93,USD:0.27,EUR:0.24,GBP:0.21,CAD:0.36,GEL:0.72,AED:0.98,AMD:0.41,MYR:1.25,AUD:0.41},
    USD: {INR:88.64,PKR:280.09,EUR:0.84,GBP:0.74,CAD:1.39,GEL:2.70,AED:3.70,SAR:3.70,AMD:1.54,MYR:4.17,AUD:1.65},
    AUD: {INR:51.80,PKR:165.76,USD:0.61,EUR:0.56,GBP:0.47,CAD:0.86,GEL:1.82,AED:2.44,SAR:2.44,AMD:1.03,MYR:2.86}
  };
  
  // Dynamic rates cache (populated from API)
  let F2F_RATES_SAFE = JSON.parse(JSON.stringify(F2F_FALLBACK_RATES)); // Deep copy fallback rates
  
  // List of all currencies we need rates for
  const F2F_FROM_CURRENCIES = ['AMD','GEL','AED','GBP','SAR','CAD','EUR','MYR','USD','AUD'];
  const F2F_TO_CURRENCIES = ['INR','PKR'];
  const F2F_ALL_CURRENCIES = [...new Set([...F2F_FROM_CURRENCIES, ...F2F_TO_CURRENCIES, 'EUR','GBP','CAD','AED','SAR','MYR','AUD'])]; // All currencies
  
  // localStorage cache helpers
  function f2fGetCachedRates() {
    try {
      const cached = localStorage.getItem(F2F_CACHE_KEY);
      const timestamp = localStorage.getItem(F2F_CACHE_TIMESTAMP_KEY);
      
      if (cached && timestamp) {
        const age = Date.now() - parseInt(timestamp, 10);
        if (age < F2F_CACHE_DURATION) {
          return JSON.parse(cached);
        }
      }
    } catch (e) {
      // localStorage not available or corrupted
    }
    return null;
  }
  
  function f2fSetCachedRates(rates) {
    try {
      localStorage.setItem(F2F_CACHE_KEY, JSON.stringify(rates));
      localStorage.setItem(F2F_CACHE_TIMESTAMP_KEY, Date.now().toString());
    } catch (e) {
      // localStorage not available
    }
  }
  
  // Fetch all exchange rates from free API (exchangerate-api.com)
  // Returns rates object with USD as base, or null if failed
  async function f2fFetchAllRatesFromAPI() {
    try {
      // Fetch USD rates (this API returns all rates for USD in one call!)
      const response = await fetch(`${F2F_API_BASE}/USD`);
      
      if (!response.ok) {
        throw new Error(`API error: ${response.status}`);
      }
      
      const data = await response.json();
      
      if (data && data.rates) {
        return data.rates; // Returns object like {EUR: 0.92, GBP: 0.79, INR: 83.2, ...}
      }
      
      return null;
    } catch (error) {
      console.warn('F2F Calculator: Failed to fetch rates from API:', error.message);
      return null;
    }
  }
  
  // Fetch all required exchange rates with localStorage caching
  // This function checks cache first, only fetches if cache is expired
  // Result: Only 1 API call per day max, even if 1000 people visit!
  async function f2fFetchAllRates() {
    // Step 1: Check cache first
    const cachedRates = f2fGetCachedRates();
    if (cachedRates) {
      // Use cached rates
      F2F_RATES_SAFE = cachedRates;
      
      // Recalculate with cached rates
      if (elFrom && elSend) {
        if (f2fLastEdited === 'recv') {
          f2fCalculateFromRecvSafe();
        } else {
          f2fCalculateSafe();
        }
      }
      
      // Fetch fresh rates in background (don't wait)
      f2fFetchAndUpdateRates();
      return;
    }
    
    // Step 2: No cache, fetch fresh rates
    await f2fFetchAndUpdateRates();
  }
  
  // Actually fetch rates from API and update cache
  async function f2fFetchAndUpdateRates() {
    // Fetch all rates from API (USD base - returns all currencies in one call!)
    const usdRates = await f2fFetchAllRatesFromAPI();
    
    if (!usdRates) {
      // API failed, use fallback rates
      F2F_RATES_SAFE = JSON.parse(JSON.stringify(F2F_FALLBACK_RATES));
      return;
    }
    
    // Convert USD-based rates to our format
    // API returns: {EUR: 0.92, GBP: 0.79, INR: 83.2, ...} where values are USD‚Üícurrency rates
    const newRates = {};
    
    for (const from of F2F_FROM_CURRENCIES) {
      newRates[from] = {};
      
      if (from === 'USD') {
        // USD is base, rates are direct
        for (const to of F2F_TO_CURRENCIES) {
          if (usdRates[to]) {
            newRates[from][to] = usdRates[to];
          }
        }
        // Cross-rates for USD
        for (const to of F2F_FROM_CURRENCIES) {
          if (to !== 'USD' && usdRates[to]) {
            newRates[from][to] = usdRates[to];
          }
        }
      } else {
        // For other currencies, calculate via USD
        const fromToUsd = usdRates[from] ? (1 / usdRates[from]) : null; // Convert USD‚Üífrom to from‚ÜíUSD
        
        if (fromToUsd) {
          // Calculate FROM ‚Üí TO currencies
          for (const to of F2F_TO_CURRENCIES) {
            if (usdRates[to]) {
              newRates[from][to] = fromToUsd * usdRates[to];
            }
          }
          
          // Calculate cross-rates between FROM currencies
          for (const to of F2F_FROM_CURRENCIES) {
            if (to !== from && to !== 'USD' && usdRates[to]) {
              newRates[from][to] = fromToUsd * usdRates[to];
            }
          }
          
          // FROM ‚Üí USD
          newRates[from]['USD'] = fromToUsd;
        }
      }
    }
    
    // Update rates cache
    F2F_RATES_SAFE = newRates;
    
    // Save to localStorage for future visitors
    f2fSetCachedRates(newRates);
    
    // Recalculate if calculator is already initialized
    if (elFrom && elSend) {
      if (f2fLastEdited === 'recv') {
        f2fCalculateFromRecvSafe();
      } else {
        f2fCalculateSafe();
      }
    }
  }
  
  // Initialize rate fetching with localStorage caching
  // No intervals needed - cache automatically expires after 24 hours
  // This means: Only 1 API call per day max, shared across ALL visitors!
  function f2fStartRateUpdates() {
    // Fetch rates (will use cache if available, otherwise fetch from API)
    f2fFetchAllRates();
    
    // Optional: Set up a daily check to refresh cache (runs once per day)
    // This ensures rates stay fresh even if no one visits for a while
    setInterval(() => {
      // Clear cache to force refresh on next visit
      try {
        const timestamp = localStorage.getItem(F2F_CACHE_TIMESTAMP_KEY);
        if (timestamp) {
          const age = Date.now() - parseInt(timestamp, 10);
          if (age >= F2F_CACHE_DURATION) {
            // Cache expired, fetch fresh rates
            f2fFetchAndUpdateRates();
          }
        }
      } catch (e) {
        // localStorage not available
      }
    }, F2F_CACHE_DURATION); // Check every 24 hours
  }
  
  const F2F_BANKS_SAFE = {
    GEL:["Bank of Georgia","TBC Bank","Liberty Bank"],
    AMD:["ID Bank","America Bank","Inecobank","Ardshinbank"],
    AED:["ADIB","ADCB","Emirates NBD","FAB"],
    MYR:["Maybank","CIMB Bank","Public Bank","Hong Leong Bank"],
    GBP:["Faster Payments","Revolut","Wise","lloyd's bank","Starling bank"],
    CAD:["Interac e-Transfer","Wise"],
    EUR:["SEPA Instant","Revolut, Wise","N26 Transfers"],
    SAR:["AL Rajhi Bank","Riyad Bank","SABB","NCB","Alinma Bank"],
    USD:["Zelle","Venmo", "Cash App"],
    AUD:["Commonwealth Bank","ANZ","Westpac","NAB"]
  };
  
  // Dedicated options for the "Receive at" dropdown
  const F2F_RECEIVE_OPTIONS = ["Bank Transfer","UPI","PhonePe","GPay"];
  
  // Scope all selectors to the calculator container
  const calculatorContainer = document.querySelector('.xyz789calc-wrapper');
  if (!calculatorContainer) return; // Exit if container not found
  
  const elFrom = calculatorContainer.querySelector('#vwx234from-select');
  const elTo = calculatorContainer.querySelector('#efg123to-select');
  const elSend = calculatorContainer.querySelector('#mno345send-input');
  const elRecv = calculatorContainer.querySelector('#bcd890recv-input');
  const elBank = calculatorContainer.querySelector('#klm789bank-select');
  const elReceive = calculatorContainer.querySelector('#zab234receive-select');
  const elSendBtn = calculatorContainer.querySelector('#rst012send-btn1');
  const elSendBtn2 = calculatorContainer.querySelector('#xyz678send-btn2');
  const elBankBtn = calculatorContainer.querySelector('#klm789bank-btn');
  const elReceiveBtn = calculatorContainer.querySelector('#zab234receive-btn');
  const elBankChangeBtn = calculatorContainer.querySelector('#klm789bank-change-btn');
  const elReceiveChangeBtn = calculatorContainer.querySelector('#zab234receive-change-btn');
  
  // Function to update bank button text
  function f2fUpdateBankButtonText(selectEl, buttonEl) {
    if (!selectEl || !buttonEl) return;
    const selectedOption = selectEl.options[selectEl.selectedIndex];
    const bankName = selectedOption ? selectedOption.textContent : '';
    const textSpan = buttonEl.querySelector('.tuv678change-text');
    if (textSpan) textSpan.textContent = bankName;
  }
  
  function f2fPopulateBanksSafe() {
    if (!elBank || !elReceive) return;
    
    const fromCurrency = elFrom.value;
    
    // Populate bank options based on sender currency
    const banks = F2F_BANKS_SAFE[fromCurrency] || ["Bank account"];
    const prevBankVal = elBank.value;
    elBank.innerHTML = banks.map(bank => `<option value="${bank.toLowerCase().replace(/\s+/g, '_')}">${bank}</option>`).join('');
    if (!prevBankVal || !banks.some(b => prevBankVal === b.toLowerCase().replace(/\s+/g, '_'))) {
      // Default to first option
      elBank.value = (banks[0] || '').toLowerCase().replace(/\s+/g, '_');
    } else {
      elBank.value = prevBankVal;
    }
    f2fUpdateBankButtonText(elBank, elBankBtn);
    
    // Populate receive options using dedicated list
    const receiveBanks = F2F_RECEIVE_OPTIONS;
    const prevRecvVal = elReceive.value;
    elReceive.innerHTML = receiveBanks.map(bank => `<option value="${bank.toLowerCase().replace(/\s+/g, '_')}">${bank}</option>`).join('');
    if (!prevRecvVal || !receiveBanks.some(b => prevRecvVal === b.toLowerCase().replace(/\s+/g, '_'))) {
      elReceive.value = (receiveBanks[0] || '').toLowerCase().replace(/\s+/g, '_');
    } else {
      elReceive.value = prevRecvVal;
    }
    f2fUpdateBankButtonText(elReceive, elReceiveBtn);
  }
  
  function f2fGetCurrencySymbol(currency) {
    const symbols = {
      'INR': '‚Çπ', 'PKR': '‚Ç®', 'USD': '$', 'EUR': '‚Ç¨', 'GBP': '¬£', 
      'CAD': 'C$', 'AED': 'ÿØ.ÿ•', 'SAR': 'Ô∑º', 'GEL': '‚Çæ', 
      'AMD': '÷è', 'MYR': 'RM', 'AUD': 'A$'
    };
    return symbols[currency] || currency;
  }
  
  let f2fLastEdited = 'send'; // Track last edited field: 'send' | 'recv'
  function f2fCalculateSafe() {
    const amt = parseFloat(elSend.value.replace(/,/g, '') || "0");
    const fromCurrency = elFrom.value;
    const toCurrency = elTo.value;
    
    if (!isFinite(amt) || amt <= 0) {
      elRecv.value = "‚Äî";
      return;
    }
    
    // Check if we have a direct rate
    let rate = (F2F_RATES_SAFE[fromCurrency] || {})[toCurrency];
    
    // If no direct rate, try reverse calculation
    if (!rate) {
      const reverseRate = (F2F_RATES_SAFE[toCurrency] || {})[fromCurrency];
      if (reverseRate) {
        rate = 1 / reverseRate;
      }
    }
    
    if (!rate) {
      elRecv.value = "‚Äî";
      return;
    }
    
    const convertedAmount = amt * rate;
    const symbol = f2fGetCurrencySymbol(toCurrency);
    elRecv.value = `${symbol} ${convertedAmount.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
  }
  
  function f2fCalculateFromRecvSafe() {
    const raw = (elRecv.value || '').toString();
    const numeric = raw.replace(/[^0-9.]/g, '');
    const recvAmt = parseFloat(numeric || '0');
    const fromCurrency = elFrom.value;
    const toCurrency = elTo.value;
    if (!isFinite(recvAmt) || recvAmt <= 0) {
      elSend.value = "‚Äî";
      return;
    }
    // Get direct or reverse rate FROM -> TO
    let rate = (F2F_RATES_SAFE[fromCurrency] || {})[toCurrency];
    if (!rate) {
      const reverseRate = (F2F_RATES_SAFE[toCurrency] || {})[fromCurrency];
      if (reverseRate) rate = 1 / reverseRate;
    }
    if (!rate) {
      elSend.value = "‚Äî";
      return;
    }
    const sendAmt = recvAmt / rate;
    elSend.value = sendAmt.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  }
  
  // ---- Custom Currency Picker ----
  const F2F_CURRENCY_META = {
    GBP: { name: 'British pound', flag: 'üá¨üáß' },
    INR: { name: 'Indian rupee', flag: 'üáÆüá≥' },
    USD: { name: 'United States dollar', flag: 'üá∫üá∏' },
    AED: { name: 'United Arab Emirates dirham', flag: 'üá¶üá™' },
    AUD: { name: 'Australian dollar', flag: 'üá¶üá∫' },
    BGN: { name: 'Bulgarian lev', flag: 'üáßüá¨' },
    CAD: { name: 'Canadian dollar', flag: 'üá®üá¶' },
    EUR: { name: 'Euro', flag: 'üá™üá∫' },
    GEL: { name: 'Georgian lari', flag: 'üá¨üá™' },
    AMD: { name: 'Armenian dram', flag: 'üá¶üá≤' },
    SAR: { name: 'Saudi riyal', flag: 'üá∏üá¶' },
    MYR: { name: 'Malaysian ringgit', flag: 'üá≤üáæ' },
    PKR: { name: 'Pakistani rupee', flag: 'üáµüá∞' }
  };
  const F2F_POPULAR = ['USD','AED','EUR','GBP'];
  let f2fCurrencyPanel;
  let f2fActiveCurrencySelect = null; // elFrom or elTo when opening
  let f2fBankPanel;
  let f2fActiveBankSelect = null; // elBank or elReceive when opening
  
  function f2fCreateCurrencyPanel() {
    if (f2fCurrencyPanel) return f2fCurrencyPanel;
    const panel = document.createElement('div');
    panel.className = 'f2f-currency-panel';
    panel.style.position = 'fixed';
    panel.style.zIndex = '999999';
    panel.style.width = '340px';
    panel.style.maxHeight = '420px';
    panel.style.overflow = 'auto';
    panel.style.background = '#fff';
    panel.style.border = '1px solid #E0E0E0';
    panel.style.borderRadius = '10px';
    panel.style.boxShadow = '0 20px 40px rgba(0,0,0,0.2)';
    panel.style.padding = '10px';
    panel.style.display = 'none';
    
    const styleHeader = (text) => {
      const h = document.createElement('div');
      h.textContent = text;
      h.style.fontSize = '13px';
      h.style.fontWeight = '700';
      h.style.color = '#666';
      h.style.margin = '8px 8px 6px 8px';
      return h;
    };
    
    const list = document.createElement('div');
    list.className = 'f2f-currency-list';
    
    function createRow(code) {
      const meta = F2F_CURRENCY_META[code] || { name: code, flag: '' };
      const row = document.createElement('div');
      row.className = 'f2f-currency-row';
      row.style.display = 'flex';
      row.style.alignItems = 'center';
      row.style.gap = '10px';
      row.style.padding = '10px 12px';
      row.style.cursor = 'pointer';
      row.style.borderRadius = '8px';
      row.addEventListener('mouseenter', () => { row.style.background = '#F5F5F5'; });
      row.addEventListener('mouseleave', () => { row.style.background = 'transparent'; });
      row.addEventListener('click', () => {
        if (!f2fActiveCurrencySelect) return;
        f2fActiveCurrencySelect.value = code;
        // Trigger recalculation honoring last edited
        if (f2fActiveCurrencySelect === elFrom || f2fActiveCurrencySelect === elTo) {
          if (f2fLastEdited === 'recv') { f2fCalculateFromRecvSafe(); } else { f2fCalculateSafe(); }
          f2fPopulateBanksSafe();
        }
        f2fCloseCurrencyPanel();
      });
      
      const flag = document.createElement('div');
      flag.textContent = meta.flag || '';
      flag.style.fontSize = '20px';
      const codeEl = document.createElement('div');
      codeEl.textContent = code;
      codeEl.style.fontWeight = '700';
      codeEl.style.minWidth = '46px';
      const name = document.createElement('div');
      name.textContent = meta.name || '';
      name.style.color = '#333';
      name.style.flex = '1';
      const check = document.createElement('div');
      check.textContent = '‚úì';
      check.style.opacity = '0.0';
      check.style.transition = 'opacity .2s';
      row.appendChild(flag);
      row.appendChild(codeEl);
      row.appendChild(name);
      row.appendChild(check);
      row.dataset.code = code;
      return row;
    }
    
    // Build popular section
    const popularHeader = styleHeader('Popular currencies');
    popularHeader.className = 'f2f-popular-header';
    panel.appendChild(popularHeader);
    F2F_POPULAR.forEach(code => list.appendChild(createRow(code)));
    panel.appendChild(list.cloneNode(true)); // placeholder to keep structure
    panel.removeChild(panel.lastChild); // remove clone
    const popularWrap = document.createElement('div');
    popularWrap.className = 'f2f-popular-wrap';
    F2F_POPULAR.forEach(code => popularWrap.appendChild(createRow(code)));
    panel.appendChild(popularWrap);
    
    // Divider
    const divider = document.createElement('div');
    divider.className = 'f2f-divider';
    divider.style.height = '1px';
    divider.style.background = '#E0E0E0';
    divider.style.margin = '8px 0';
    panel.appendChild(divider);
    
    // All currencies
    const allHeader = styleHeader('All currencies');
    allHeader.className = 'f2f-all-header';
    panel.appendChild(allHeader);
    const allWrap = document.createElement('div');
    allWrap.className = 'f2f-all-wrap';
    const allCodes = Object.keys(F2F_RATES_SAFE).sort();
    // Include anything present in meta but not in rates if any (excluding removed codes)
    Object.keys(F2F_CURRENCY_META).forEach(c => { if (!allCodes.includes(c)) allCodes.push(c); });
    allCodes.forEach(code => allWrap.appendChild(createRow(code)));
    panel.appendChild(allWrap);
    document.body.appendChild(panel);
    f2fCurrencyPanel = panel;
    return panel;
  }
  
  function f2fOpenCurrencyPanel(forSelect) {
    const panel = f2fCreateCurrencyPanel();
    f2fActiveCurrencySelect = forSelect;
    
    // Filter visible currencies depending on which select opened the panel
    panel.querySelectorAll('.f2f-currency-row').forEach(r => {
      const code = r.dataset.code;
      if (forSelect === elFrom) {
        // For "You send": only allow specific sender currencies
        const allowedFrom = ['AMD','GEL','AED','GBP','SAR','CAD','EUR','MYR','USD'];
        r.style.display = allowedFrom.includes(code) ? 'flex' : 'none';
      } else if (forSelect === elTo) {
        // For "Recipient gets": show ONLY INR and PKR
        r.style.display = (code === 'INR' || code === 'PKR') ? 'flex' : 'none';
      } else {
        r.style.display = 'flex';
      }
    });
    
    // Toggle section visibility: hide popular for Recipient gets
    const showPopular = (forSelect !== elTo);
    const popularHeaderEl = panel.querySelector('.f2f-popular-header');
    const popularWrapEl = panel.querySelector('.f2f-popular-wrap');
    const dividerEl = panel.querySelector('.f2f-divider');
    if (popularHeaderEl) popularHeaderEl.style.display = showPopular ? '' : 'none';
    if (popularWrapEl) popularWrapEl.style.display = showPopular ? '' : 'none';
    if (dividerEl) dividerEl.style.display = showPopular ? '' : 'none';
    
    // Mark current selection with check
    const current = forSelect.value;
    panel.querySelectorAll('.f2f-currency-row').forEach(r => {
      if (r.style.display === 'none') return;
      const isActive = r.dataset.code === current;
      r.lastChild.style.opacity = isActive ? '1' : '0';
    });
    
    // Position to the right of select badge if possible
    const badge = forSelect.closest('.stu901currency-badge') || forSelect;
    const rect = badge.getBoundingClientRect();
    const top = Math.max(8, rect.top);
    const left = Math.min(window.innerWidth - 360, rect.right + 10);
    panel.style.top = `${top}px`;
    panel.style.left = `${left}px`;
    panel.style.display = 'block';
    
    // Close handlers
    setTimeout(() => {
      document.addEventListener('mousedown', f2fOutsideCloseOnce, { once: true });
      document.addEventListener('keydown', f2fEscCloseOnce, { once: true });
      document.addEventListener('scroll', f2fCloseCurrencyPanel, { once: true, passive: true });
      window.addEventListener('scroll', f2fCloseCurrencyPanel, { once: true, passive: true });
    }, 0);
  }
  
  function f2fCloseCurrencyPanel() {
    if (f2fCurrencyPanel) f2fCurrencyPanel.style.display = 'none';
    f2fActiveCurrencySelect = null;
  }
  
  function f2fOutsideCloseOnce(e) {
    if (!f2fCurrencyPanel) return;
    if (!f2fCurrencyPanel.contains(e.target)) {
      f2fCloseCurrencyPanel();
    }
  }
  
  function f2fEscCloseOnce(e) {
    if (e.key === 'Escape') f2fCloseCurrencyPanel();
  }
  
  // ---- Custom Bank Picker ----
  function f2fCreateBankPanel() {
    if (f2fBankPanel) return f2fBankPanel;
    const panel = document.createElement('div');
    panel.className = 'f2f-bank-panel';
    panel.style.position = 'fixed';
    panel.style.zIndex = '999999';
    panel.style.width = '340px';
    panel.style.maxHeight = '420px';
    panel.style.overflow = 'auto';
    panel.style.background = '#fff';
    panel.style.border = '1px solid #E0E0E0';
    panel.style.borderRadius = '10px';
    panel.style.boxShadow = '0 20px 40px rgba(0,0,0,0.2)';
    panel.style.padding = '10px';
    panel.style.display = 'none';
    document.body.appendChild(panel);
    f2fBankPanel = panel;
    return panel;
  }
  
  function f2fOpenBankPanel(forSelect, banks, anchorEl) {
    const panel = f2fCreateBankPanel();
    f2fActiveBankSelect = forSelect;
    panel.innerHTML = '';
    const header = document.createElement('div');
    header.textContent = 'Choose bank';
    header.style.fontSize = '13px';
    header.style.fontWeight = '700';
    header.style.color = '#666';
    header.style.margin = '4px 8px 8px 8px';
    panel.appendChild(header);
    
    banks.forEach(bank => {
      const value = bank.toLowerCase().replace(/\s+/g, '_');
      const row = document.createElement('div');
      row.style.display = 'flex';
      row.style.alignItems = 'center';
      row.style.justifyContent = 'space-between';
      row.style.padding = '10px 12px';
      row.style.cursor = 'pointer';
      row.style.borderRadius = '8px';
      row.addEventListener('mouseenter', () => { row.style.background = '#F5F5F5'; });
      row.addEventListener('mouseleave', () => { row.style.background = 'transparent'; });
      row.addEventListener('click', () => {
        forSelect.value = value;
        // Update button text
        const buttonEl = (forSelect.id === 'klm789bank-select') ? elBankBtn : elReceiveBtn;
        f2fUpdateBankButtonText(forSelect, buttonEl);
        f2fCloseBankPanel();
      });
      
      const name = document.createElement('div');
      name.textContent = bank;
      const check = document.createElement('div');
      check.textContent = '‚úì';
      check.style.opacity = (forSelect.value === value) ? '1' : '0';
      row.appendChild(name);
      row.appendChild(check);
      panel.appendChild(row);
    });
    
    const rect = (anchorEl || forSelect).getBoundingClientRect();
    const top = Math.max(8, rect.top);
    const left = Math.min(window.innerWidth - 360, rect.right + 10);
    panel.style.top = `${top}px`;
    panel.style.left = `${left}px`;
    panel.style.display = 'block';
    
    setTimeout(() => {
      document.addEventListener('mousedown', f2fOutsideBankCloseOnce, { once: true });
      document.addEventListener('keydown', f2fEscBankCloseOnce, { once: true });
      document.addEventListener('scroll', f2fCloseBankPanel, { once: true, passive: true });
      window.addEventListener('scroll', f2fCloseBankPanel, { once: true, passive: true });
    }, 0);
  }
  
  function f2fCloseBankPanel() {
    if (f2fBankPanel) f2fBankPanel.style.display = 'none';
    f2fActiveBankSelect = null;
  }
  
  function f2fOutsideBankCloseOnce(e) {
    if (!f2fBankPanel) return;
    if (!f2fBankPanel.contains(e.target)) f2fCloseBankPanel();
  }
  
  function f2fEscBankCloseOnce(e) { if (e.key === 'Escape') f2fCloseBankPanel(); }
  
  // Event listeners
  if (elFrom) elFrom.addEventListener('change', () => {
    f2fPopulateBanksSafe();
    if (f2fLastEdited === 'recv') { f2fCalculateFromRecvSafe(); } else { f2fCalculateSafe(); }
  });
  if (elTo) elTo.addEventListener('change', () => {
    f2fPopulateBanksSafe();
    if (f2fLastEdited === 'recv') { f2fCalculateFromRecvSafe(); } else { f2fCalculateSafe(); }
  });
  if (elSend) elSend.addEventListener('input', () => { f2fLastEdited = 'send'; f2fCalculateSafe(); });
  if (elRecv) elRecv.addEventListener('input', () => { f2fLastEdited = 'recv'; f2fCalculateFromRecvSafe(); });
  
  // Open custom currency panel when clicking the currency selects
  function interceptOpenCurrency(e, selectEl) {
    e.preventDefault();
    e.stopPropagation();
    f2fOpenCurrencyPanel(selectEl);
    selectEl.blur();
    return false;
  }
  
  if (elFrom) {
    elFrom.addEventListener('mousedown', (e) => interceptOpenCurrency(e, elFrom));
    elFrom.addEventListener('click', (e) => interceptOpenCurrency(e, elFrom));
  }
  if (elTo) {
    elTo.addEventListener('mousedown', (e) => interceptOpenCurrency(e, elTo));
    elTo.addEventListener('click', (e) => interceptOpenCurrency(e, elTo));
  }
  
  // CHANGE buttons open custom bank panel on the right
  if (elBankChangeBtn) {
    elBankChangeBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const currency = elFrom.value;
      const banks = F2F_BANKS_SAFE[currency] || ["Bank account"];
      // Ensure options reflect current currency and default to first if empty
      const prev = elBank.value;
      elBank.innerHTML = banks.map(b => `<option value="${b.toLowerCase().replace(/\s+/g,'_')}">${b}</option>`).join('');
      elBank.value = prev && banks.some(b=>prev===b.toLowerCase().replace(/\s+/g,'_')) ? prev : (banks[0]||'').toLowerCase().replace(/\s+/g,'_');
      f2fUpdateBankButtonText(elBank, elBankBtn);
      f2fOpenBankPanel(elBank, banks, elBankChangeBtn);
    });
  }
  
  if (elReceiveChangeBtn) {
    elReceiveChangeBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const banks = F2F_RECEIVE_OPTIONS;
      // Ensure options reflect current currency and default to first if empty
      const prev = elReceive.value;
      elReceive.innerHTML = banks.map(b => `<option value="${b.toLowerCase().replace(/\s+/g,'_')}">${b}</option>`).join('');
      elReceive.value = prev && banks.some(b=>prev===b.toLowerCase().replace(/\s+/g,'_')) ? prev : (banks[0]||'').toLowerCase().replace(/\s+/g,'_');
      f2fUpdateBankButtonText(elReceive, elReceiveBtn);
      f2fOpenBankPanel(elReceive, banks, elReceiveChangeBtn);
    });
  }
  
  if (elSendBtn) elSendBtn.addEventListener('click', (e) => { 
    e.preventDefault(); 
    window.open('https://wa.me/15144188394', '_blank');
  });
  if (elSendBtn2) elSendBtn2.addEventListener('click', (e) => { 
    e.preventDefault(); 
    window.open('https://t.me/fiat2fiat', '_blank');
  });
  
  // Function to ensure emoji display
  function f2fEnsureEmojiDisplay() {
    if (!calculatorContainer) return;
    
    const currencySelects = calculatorContainer.querySelectorAll('.yza567currency-dropdown');
    currencySelects.forEach(select => {
      select.style.fontFamily = 'Segoe UI Emoji, Apple Color Emoji, Noto Color Emoji, Twemoji, EmojiOne, sans-serif';
      select.style.fontSize = '14px';
    });
    
    const options = calculatorContainer.querySelectorAll('.yza567currency-dropdown option');
    options.forEach(option => {
      option.style.fontFamily = 'Segoe UI Emoji, Apple Color Emoji, Noto Color Emoji, Twemoji, EmojiOne, sans-serif';
      option.style.fontSize = '14px';
    });
  }
  
  // Init
  if (elFrom && elSend) {
    f2fPopulateBanksSafe();
    f2fCalculateSafe();
    f2fEnsureEmojiDisplay();
    // Start fetching live exchange rates
    f2fStartRateUpdates();
  }
  
  // Also run on page load
  document.addEventListener('DOMContentLoaded', () => {
    f2fEnsureEmojiDisplay();
    // Start rate updates if not already started
    if (elFrom && elSend && !f2fRateUpdateInterval) {
      f2fStartRateUpdates();
    }
  });
})();
</script>